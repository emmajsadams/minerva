#!/bin/sh
set -e  # Exit immediately if any command fails

echo "ğŸš€ Running pre-commit checks..."

# Check for secrets
echo "ğŸ” Checking for secrets..."
if ! node scripts/check-secrets.js; then
  echo "âŒ Secret check failed!"
  exit 1
fi

# Run linter (check only, don't auto-fix)
echo "ğŸ§¹ Running linter..."
if ! bun run lint; then
  echo "âŒ Linting failed! Run 'bun run lint:fix' to fix issues."
  exit 1
fi

# Run formatter check (don't auto-format)
echo "ğŸ¨ Checking code formatting..."
if ! bun run format:check; then
  echo "âŒ Code formatting check failed! Run 'bun run format' to fix formatting."
  exit 1
fi

# Type checking
echo "ğŸ” Type checking..."
if ! bun run type-check; then
  echo "âŒ Type checking failed!"
  exit 1
fi

echo "âœ… All pre-commit checks passed!"
